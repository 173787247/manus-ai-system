# 基于 RASCEF 框架的智能客服系统

## 项目概述

本项目实现了一个基于 **RASCEF 框架**的智能客服系统，专门用于为新用户推荐电信套餐。系统采用**思维链（Chain of Thought）推理**，能够根据用户需求智能推荐最合适的套餐。

## RASCEF 框架说明

RASCEF 是一个结构化的 Prompt 工程框架，包含以下六个要素：

### R - Role (角色)
定义 AI 的角色和特点：
- 专业的电信套餐推荐专家
- 友好、耐心的客服人员
- 精准的需求分析能力
- 结构化的输出能力

### A - Action (行动)
明确 AI 需要执行的任务：
1. 理解用户需求和背景信息
2. 使用思维链分析用户需求
3. 从可用套餐中选择最合适的推荐
4. 以结构化方式展示推荐结果

### S - Situation (情境)
描述当前对话的情境：
- 用户消息内容
- 对话历史记录
- 可用的套餐列表

### C - Context (上下文)
提供相关的上下文信息：
- 用户是新用户
- 需要考虑的因素（价格、流量、通话、适用人群）
- 信息不足时的处理方式

### E - Example (示例)
提供示例对话，展示期望的输出格式和推理过程。

### F - Format (格式)
定义输出的结构化格式：
- 思考过程（如果启用思维链）
- 推荐套餐信息
- 推荐理由列表
- 温馨提示

## 功能特点

### 1. 思维链推理（Chain of Thought）

系统使用多步骤推理过程来推荐套餐：

```
步骤1：根据用户身份筛选套餐
  - 在校生 → 校园卡
  - 60岁以上 → 关爱卡
  - 其他 → 无限制套餐

步骤2：根据预算筛选套餐
  - 低预算（≤50元）
  - 中预算（50-99元）
  - 高预算（≥99元）

步骤3：根据流量需求筛选套餐
  - 高需求 → 优先大流量套餐
  - 低需求 → 优先小流量套餐

步骤4：根据通话需求调整推荐
  - 高需求 → 优先高通话时长套餐

步骤5：生成最终推荐和理由
```

### 2. 结构化输出

推荐结果以结构化格式展示：

```
【推荐套餐】校园卡
【价格】39元/月
【流量】200 G/月
【通话】100 分钟/月
【适用人群】在校生

【推荐理由】
1. 符合您的在校生身份
2. 200G流量满足您的使用需求
3. 价格适中，性价比高
```

### 3. 智能需求分析

系统能够从用户消息中自动提取：
- **身份信息**：学生、老人、普通用户等
- **预算范围**：低、中、高
- **流量需求**：高、中、低
- **通话需求**：高、中、低

## 可用套餐

| 套餐名称 | 价格(元/月) | 流量(G/月) | 通话(分钟/月) | 适用人群 |
|---------|-----------|-----------|-------------|---------|
| 经济卡 | 29 | 20 | 100 | 无限制 |
| 关爱卡 | 9 | 5 | 10 | 60岁以上 |
| 校园卡 | 39 | 200 | 100 | 在校生 |
| 无限卡 | 199 | 无限 | 500 | 无限制 |
| 精英卡 | 99 | 200 | 500 | 无限制 |

## 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 运行演示程序

```bash
python telecom_customer_service_demo.py
```

### 3. 运行测试

```bash
python test_customer_service.py
```

## 使用示例

### 示例 1：在校大学生

```
用户：我是大学生，平时用流量比较多，看视频和玩游戏，预算有限

智能客服：
【思考过程】
【步骤1】根据用户身份筛选套餐
  用户是在校生，筛选出：['校园卡']
【步骤2】根据预算筛选套餐
  预算较低（≤50元），筛选出：['校园卡']
【步骤3】根据流量需求筛选套餐
  流量需求高，按流量排序：['校园卡', '无限卡', '精英卡']
【步骤4】根据通话需求调整推荐
【步骤5】最终推荐：校园卡

【推荐套餐】校园卡
【价格】39元/月
【流量】200 G/月
【通话】100 分钟/月
【适用人群】在校生

【推荐理由】
1. 符合您的在校生身份
2. 流量充足（200），满足您的使用需求
3. 价格实惠（39元/月），符合您的预算
```

### 示例 2：60岁以上老人

```
用户：我60多岁了，平时不怎么用手机，就是偶尔打个电话，想要最便宜的

智能客服：
【推荐套餐】关爱卡
【价格】9元/月
【流量】5 G/月
【通话】10 分钟/月
【适用人群】60岁以上

【推荐理由】
1. 符合您的60岁以上身份
2. 价格实惠（9元/月），符合您的预算
3. 流量适中（5），避免浪费
```

## 代码结构

```
manus-ai-system/
├── src/
│   └── agents/
│       ├── base_agent.py              # 基础 Agent 类
│       └── customer_service_agent.py  # 智能客服 Agent（RASCEF 框架）
├── telecom_customer_service_demo.py   # 演示程序
├── test_customer_service.py           # 测试脚本
└── README_RASCEF.md                   # 本文档
```

## 核心实现

### RASCEF Prompt 构建

```python
def _build_rascef_prompt(self, user_message: str) -> str:
    """使用 RASCEF 框架构建 Prompt"""
    # R: 角色定义
    role = "你是一位专业的电信套餐推荐智能客服..."
    
    # A: 行动/任务
    action = "你的任务是：1. 理解用户需求..."
    
    # S: 情境/场景
    situation = f"当前对话情境：用户消息：{user_message}..."
    
    # C: 上下文信息
    context = "上下文信息：用户是新用户..."
    
    # E: 示例
    example = "示例对话：..."
    
    # F: 输出格式
    format_spec = "输出格式要求：..."
    
    # 组合完整的 RASCEF Prompt
    return f"{role}\n\n{action}\n\n{situation}\n\n{context}\n\n{example}\n\n{format_spec}"
```

### 思维链推理

```python
def _recommend_package(self, needs: Dict[str, Any]) -> tuple:
    """根据用户需求推荐套餐（使用思维链推理）"""
    reasoning_steps = []
    
    # 步骤1：根据身份筛选
    # 步骤2：根据预算筛选
    # 步骤3：根据流量需求筛选
    # 步骤4：根据通话需求调整
    # 步骤5：最终推荐
    
    return recommended_package, reasons, reasoning_steps
```

## 技术特点

1. **框架化设计**：使用 RASCEF 框架确保 Prompt 的完整性和一致性
2. **思维链推理**：多步骤推理过程，提高推荐准确性
3. **结构化输出**：清晰的格式，便于用户理解
4. **可扩展性**：易于添加新套餐和优化推荐逻辑
5. **对话记忆**：支持多轮对话，保留上下文信息

## 未来改进方向

1. **集成 LLM**：使用真实的大语言模型替代规则引擎
2. **多轮对话优化**：改进对话流程，支持更自然的交互
3. **个性化推荐**：基于用户历史数据优化推荐算法
4. **情感分析**：识别用户情感，提供更贴心的服务
5. **可视化界面**：开发 Web 或 GUI 界面

## 作者

本项目为 AI 全栈开发课程作业，展示了 RASCEF 框架在智能客服系统中的应用。

## 许可证

本项目仅供学习和研究使用。

